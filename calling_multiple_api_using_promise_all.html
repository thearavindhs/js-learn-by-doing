<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Dragon Trainer Monthly</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style type="text/css">
      body {
        margin: 0 auto;
        max-width: 40em;
        width: 88%;
      }
    </style>
  </head>
  <body>

    <h1>Dragon Trainer Monthly</h1>

    <div id="app"></div>

    <script>
      // Your code goes here...
const app = document.querySelector('#app');

let articles = [];

let authors = [];

let html = '';

function getAuthor(name, authors) {
              return authors.find(function (author) {
                      return author.author === name;
              });
}

function getHtml() {
              Promise.all([
                      fetch('https://vanillajsacademy.com/api/dragons.json'),
                      fetch('https://vanillajsacademy.com/api/dragons-authors.json'),
              ])
                      .then(function (responses) {
                              // Get a JSON object from each of the responses
                              return Promise.all(
                                      responses.map(function (response) {
                                              return response.json();
                                      })
                              );
                      })
                      .then(function (data) {
                              // You would do something with both sets of data here
                              // data[0] is the /posts endpoint
                              // data[1] is the /users endpoint
                              articles = data[0].articles;
                              authors = data[1].authors;

                              // const authorName = authors.find(function (author) {
                              //         return author.bio;
                              // });
                              // console.log(authorName.bio);

                              //             ${(function () {
                              // authors.find(function (author)){
                              //     if (author === article.author) {
                              //       return `<p><em>${author.bio}</em></p>`;
                              //     }
                              //   }
                              // })()}

                              // const zip = (a, b) => a.map((x, i) => [x, b[i]]);
                              // for (const [a, b] of zip(articles, authors)) {
                              //         if (a.author === b.author) {
                              //                 console.log('yes');
                              //         }
                              // }

                              //    <p><em>By ${author ? `${author.author} - ${author.bio}` : article.author}</em></p>

                              for (const article of articles) {
                                      const author = getAuthor(article.author, authors);
                                      html += `<article>
                                <h2><a href="${article.url}">${article.title}</a></h2>

                                ${(function () {
                                        if (author) {
                                                return `<p><em> ${author.author} - ${author.bio}</em></p>`;
                                        }
                                        return `<p><em>${article.author}</em></p>`;
                                })()}

                                <p>${article.article}</p>
                                </article>`;
                              }

                              app.innerHTML = `<ul>${html}</ul>`;
                      })
                      .catch(function (error) {
                              // if there's an error, log it
                              console.log(error);
                      });
}

getHtml();
// async function getQuote() {
//               try {
//                       const response = await fetch('https://vanillajsacademy.com/api/dragons.json');

//                       if (!response.ok) {
//                               throw new Error('Something went wrong.');
//                       }

//                       const data = await response.json();

//                       if (!data) {
//                               throw new Error('No data.');
//                       }

//                       articles = data.articles;

//                       app.innerHTML = `<ul>${html}</ul>`;
//               } catch (error) {
//                       throw new Error(error);
//               }
// }

// getQuote();
    </script>
  </body>
</html>
